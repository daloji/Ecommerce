<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Coza Store</title>
    <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"/>
	
	<div th:replace="fragments/script.html"/> 

	   <style>
	       #loading-spinner {
	     border: 8px solid #f3f3f3;
	     border-top: 8px solid #3498db;
	     border-radius: 50%;
	     width: 50px;
	     height: 50px;
	     animation: spin 1s linear infinite;
	     margin: 20% auto;
	 }

	 @keyframes spin {
	     0% { transform: rotate(0deg); }
	     100% { transform: rotate(360deg); }
	 }

	 #content {
	     display: none;
	 }
	 
	 #chartWrapper{
	     display:flex;
	     margin: 0px auto;
	     width:700px;
	     height:300px;
	 }
	 </style>
	 
	 <!-- Helpers -->
	 
	  <script th:src="@{/vendor/js/helpers.js}"></script>
	  <script th:src="@{/js/config.js}"></script>



		 
</head>


<body>
    <div id="loading-spinner"></div>
    <!-- Layout wrapper -->
    <div class="layout-wrapper layout-content-navbar" id="content" style="display: none;">
      <div class="layout-container">
        <!-- Menu -->

		<div th:replace="fragments/menu.html"/> 
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">

          <!-- Content wrapper -->
          <div class="content-wrapper">
            <!-- Content -->
            <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none container-xxl  " style="background-color: #fff; width: 100%;">
              <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                <i class="bx bx-menu bx-sm"></i>
                <span class="app-brand-text demo menu-text fw-bolder ms-2" style="color: #566a7f;">Coza store</span>
              </a>
            </div>

<div class="container-xxl flex-grow-1 container-p-y">
  <div class="row">
    <div class="mb-4 order-0">
      <div class="card">
        <div class="d-flex align-items-end row">
          <div class="col-sm-7">
            <div class="card-body">
              <h5 class="card-title text-primary">Welcome To Dashboard</h5>
              <p class="mt-4">
                <span class="fw-bold">Name: </span>test
              </p>
              <p class="mb-4">
                <span class="fw-bold">Email: </span>jiantila@gmail.com
              </p>
            </div>
          </div>
          <div class="col-sm-5 text-center text-sm-left">
            <div class="card-body pb-0 px-0 px-md-4">
              <img  th:src="@{/images/admin/man-with-laptop-light.png}" height="140" alt="View Badge User"  />
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="order-1">
      <div class="row d-flex">
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <div class="card-title d-flex align-items-start justify-content-between">
                <div class="avatar flex-shrink-0">
                  <img  th:src="@{/images/icons/chart-success.png}" alt="chart success" class="rounded" />
                </div>
              </div>
              <span class="fw-semibold d-block mb-1">Today's Orders</span>
              <h3 class="card-title mb-2" th:text="${nbOrderDaily}"></h3>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <div class="card-title d-flex align-items-start justify-content-between">
                <div class="avatar flex-shrink-0">
                  <img th:src="@{/images/icons/chart-success.png}" alt="chart success" class="rounded" />
                </div>
              </div>
              <span class="fw-semibold d-block mb-1">Delivered Monthly Orders</span>
              <h3 class="card-title mb-2" th:text="${nbDeliverMonthly}"></h3>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <div class="card-title d-flex align-items-start justify-content-between">
                <div class="avatar flex-shrink-0">
                  <img th:src="@{/images/icons/chart-success.png}" alt="chart success" class="rounded" />
                </div>
              </div>
              <span class="fw-semibold d-block mb-1">Order user of Month</span>
              <h3 class="card-title mb-2" th:text="${nbOrderMonthly}"></h3>
            </div>
          </div>
        </div>
        <div class="col-lg-3 col-md-6 mb-4">
          <div class="card">
            <div class="card-body">
              <div class="card-title d-flex align-items-start justify-content-between">
                <div class="avatar flex-shrink-0">
                  <img th:src="@{/images/icons/wallet-info.png}" alt="Credit Card" class="rounded" />
                </div>
              </div>
              <span class="fw-semibold d-block mb-1">Profit of this Month</span>
              <h3 class="card-title text-nowrap mb-1" th:text="${totalOrderMonthly}"></h3>
            </div>
          </div>
        </div>
		
		<!--<div class="col-lg-3 col-md-6 mb-4">
		         <div class="card">
		           <div class="card-body">
		             <div class="card-title d-flex align-items-start justify-content-between">
		               <div class="avatar flex-shrink-0">
		                 <img th:src="@{/images/icons/wallet-info.png}" alt="Credit Card" class="rounded" />
		               </div>
		             </div>
		             <span class="fw-semibold d-block mb-1">Profit Total</span>
		             <h3 class="card-title text-nowrap mb-1">â‚¹0</h3>
		           </div>
		         </div>
		   </div>-->
		
      </div>
    </div>
  </div>

  <div class="row">
	
    <div class="col-md-6 grid-margin stretch-card mb-4">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Payment Method Distribution</h4>
          <div class="chart-container" style="height: 300px;">
            <canvas id="paymentMethodChart"></canvas>
          </div>
        </div>
      </div>
    </div>
    
	<div class="col-md-6 grid-margin stretch-card mb-4">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Monthly Sales</h4>
          <div class="chart-container" style="height: 300px;">
            <canvas id="monthlySalesChart"></canvas>
          </div>
        </div>
      </div>
    </div>
	
  </div>
  
  <div class="row">
	<div id="chartDiv" style="width: 700px;height: 400px;margin: 0px auto;margin-bottom:15px"></div>
	<div id="chartWrapper">
	    <div id="chartDiv1" style="width: 300px;height: 300px"></div>
	    <div id="chartDiv2" style="width: 400px;height: 300px"></div>
	</div>

</div>
<!-- / Content -->

<div class="content-backdrop fade"></div>
</div>
<!-- Content wrapper -->
</div>
<!-- / Layout page -->
</div>

<!-- Overlay -->
<div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->

<!-- Core JS -->
<!-- build:js assets/vendor/js/core.js -->
<script th:src="@{/vendor/libs/jquery/jquery.js}"></script>
<script th:src="@{/vendor/libs/popper/popper.js}"></script>
<script th:src="@{/vendor/js/bootstrap.js}"></script>
<script th:src="@{/vendor/libs/perfect-scrollbar/perfect-scrollbar.js}"></script>

<script th:src="@{/vendor/js/menu.js}"></script>
<!-- endbuild -->

<!-- Vendors JS -->
<script th:src="@{/vendor/libs/apex-charts/apexcharts.js}"></script>

<!-- Main JS -->
<script th:src="@{/js/main.js}"></script>

<!-- Page JS -->
<script th:src="@{/js/dashboards-analytics.js}"></script>

<!-- Place this tag in your head or just before your close body tag. -->
<script async defer src="https://buttons.github.io/buttons.js"></script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script  th:inline="javascript">
  const codCount = '0'
  const wltCount = '34'
  const rzpCount = '0'
  var order = /*[[${order}]]*/ ;
  const paymentMethodData = {
    labels: ['Cash on delivery', 'Wallet', 'Razorpay'],
    datasets: [{
      data: [codCount, wltCount, rzpCount],
      backgroundColor: ['#FF5733', '#33FF57', '#5733FF'],
    }],
  };

  const monthlySalesData = {
    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], // Add labels for each month
    datasets: [{
      label: 'Monthly Sales',
      data: order,
      backgroundColor: 'rgba(75, 192, 192, 0.2)',
      borderColor: 'rgba(75, 192, 192, 1)',
      borderWidth: 1,
    }],
  };

  // Function to render the payment method pie chart
  function renderPaymentMethodChart() {
    const ctx = document.getElementById('paymentMethodChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: paymentMethodData,
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'top',
          },
        },
      },
    });
  }

  // Function to render the monthly sales bar chart
  function renderMonthlySalesChart() {
    const ctx = document.getElementById('monthlySalesChart').getContext('2d');
    new Chart(ctx, {
      type: 'bar',
      data: monthlySalesData,
      options: {
        scales: {
          y: {
            beginAtZero: true,
          },
        },
      },
    });
  }

  // Call the chart rendering functions when your data is ready
  // For example, after fetching data from the server
  renderPaymentMethodChart();
  renderMonthlySalesChart();
  
  
  ////////////////////////////////////////////////////////////
  
  var chart, chart1, chart2; 
  var palette = ['#FBC02D', '#8BC34A']; 
  var butterflyChartConfig = { 
    title: { 
      position: 'center', 
      label_style: { 
        fontWeight: 'bold', 
        fontSize: 18 
      } 
    }, 
    type: 'horizontal column solid', 
    defaultPoint: { 
      tooltip: '%name', 
      outline_width: 0, 
      label_text: '{%yValue:c2}B'
    }, 
    yAxis: { visible: false, formatString: 'c2' }, 
    defaultSeries_mouseTracking_enabled: false, 
    legend_visible: false, 
    toolbar_visible: false
  }; 
  JSC.fetch( 
    './resources/top-internet-companies.csv'
  ) 
    .then(function(response) { 
      return response.text(); 
    }) 
    .then(function(text) { 
      var data = JSC.csv2Json(text); 
      chart = renderMainChart(data); 
      chart1 = renderButterflyChart1( 
        makeSeries(chart.series(0).points(0)) 
      ); 
      chart2 = renderButterflyChart2( 
        makeSeries(chart.series(0).points(1)) 
      ); 
    }) 
    .catch(function(error) { 
      console.error(error); 
    }); 
    
  function renderMainChart(data) { 
    var series = [ 
      { 
        points: data.map(function(item) { 
          return { 
            x: item.company, 
            y: item.revenue, 
            attributes: { 
              grossProfit: item.gross_profit, 
              operatingIncome: 
                item.operating_income, 
              marketCap: item.market_cap 
            } 
          }; 
        }) 
      } 
    ]; 
    
    return JSC.chart( 
      'chartDiv', 
      { 
        title_label_text: 
          '<span style="font-size:18px">Top 10 US Internet Companies by Revenue</span><br>' + 
          'Select 2 companies to compare key indicators', 
        type: 'column solid', 
        defaultTooltip_enabled: false, 
        defaultPoint: { 
          label_text: '%yValueB', 
          focusGlow: false, 
          color: '#e0e0e0', 
          outline_width: 0 
        }, 
        defaultSeries_pointSelection: { max: 2 }, 
        events_pointSelectionChanged: selectCompanies, 
        legend_visible: false, 
        series: series, 
        toolbar_visible: false
      }, 
      function(c) { 
        var series = c.series(0); 
        series 
          .points(0) 
          .options({ selected: true }); 
        series 
          .points(1) 
          .options({ selected: true }); 
      } 
    ); 
  } 
    
  function selectCompanies(items) { 
    var mainSeries = chart.series(0); 
    if (items.length < 2) { 
      items = [ 
        mainSeries.points(0), 
        mainSeries.points(1) 
      ]; 
    } 
    //Reset all point colors. 
    mainSeries 
      .points() 
      .options({ color: '#e0e0e0' }); 
    
    items.forEach(function(p, i) { 
      p.options({ color: palette[i] }); 
    }); 
    
    chart1 
      .options({ 
        title_label_text: items[0].tokenValue( 
          '%name'
        ) 
      }) 
      .series(0) 
      .options({ 
        points: makeSeries(items[0])[0].points 
      }); 
    
    chart2 
      .options({ 
        title_label_text: items[1].tokenValue( 
          '%name'
        ) 
      }) 
      .series(0) 
      .options({ 
        points: makeSeries(items[1])[0].points 
      }); 
  } 
    
  function renderButterflyChart1(series) { 
    return JSC.chart( 
      'chartDiv1', 
      JSC.merge( 
        { 
          title_label_color: JSC.colorToPalette( 
            palette[0], 
            { lightness: 0.4 }, 
            2, 
            0 
          )[0], 
          yAxis_scale_invert: true, 
          palette: [palette[0]], 
          xAxis_visible: false, 
          series: series 
        }, 
        butterflyChartConfig 
      ) 
    ); 
  } 
    
  function renderButterflyChart2(series) { 
    return JSC.chart( 
      'chartDiv2', 
      JSC.merge( 
        { 
          title_label_color: JSC.colorToPalette( 
            palette[1], 
            { lightness: 0.4 }, 
            2, 
            0 
          )[0], 
          xAxis_defaultTick_label: { 
            text: 
              '<span style="align:center">%value</span>', 
            padding: 5, 
            width: 100, 
            align: 'center'
          }, 
          palette: [palette[1]], 
          series: series 
        }, 
        butterflyChartConfig 
      ) 
    ); 
  } 
    
  function makeSeries(point) { 
    return [ 
      { 
        name: point.tokenValue('%name'), 
        id: 'company', 
        points: [ 
          makePoint('Revenue', '%yValue'), 
          makePoint('Gross profit', '%grossProfit'), 
          makePoint( 
            'Operating income', 
            '%operatingIncome'
          ), 
          makePoint('Market cap', '%marketCap') 
        ] 
      } 
    ]; 
    
    function makePoint(name, token) { 
      var tokenValue = point.tokenValue(token); 
      return { 
        id: name, 
        x: name, 
        label_text: 
          tokenValue < 0 
            ? '(-%yValueB)'
            : '%yValue', 
        y: Math.abs(point.tokenValue(token)), 
        color: tokenValue < 0 ? 'red' : null
      }; 
    } 
  } 
  ///////////////////////////////////////////////////////////////// 
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    // Hide the loading spinner
    document.getElementById("loading-spinner").style.display = "none";
    // Display the content
    document.getElementById("content").style.display = "block";
  });
</script>

</body>

</html>